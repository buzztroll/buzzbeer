{% extends "base.html" %}

{%  block sub_header %}
    <script src='https://cdn.plot.ly/plotly-2.32.0.min.js'></script>

    <script type="text/javascript">
        function doGauge() {
            var data = [
                {
                    domain: { x: [0, 1], y: [0, 1] },
                    value: {{beers_left}},
                    title: { text: "Beers" },
                    type: "indicator",
                    mode: "gauge+number",
                    gauge: {
                        axis: {range: [null, {{ total_beers }}], tickwidth: 1, tickcolor: "darkblue"},
                    }
                }
            ];

            var layout = { width: 600, height: 500, margin: { t: 0, b: 0 } };
            Plotly.newPlot('gauge_div_id', data, layout);
        }
        window.onload = doGauge;
    </script>
{% endblock %}


{% block content %}

{% if not scale_exists %}
    <h1>You must calibrate your scale.</h1>
    <a href="calibrate">Calibrate</a>
{%  elif not keg_exists %}
    <h1>You must add a new keg.</h1>
    <a href="newkeg">New Keg</a>
{%  else %}
    <div>
    <div id='gauge_div_id'></div>
    <h2>Stats</h2>
        <table>
            <tr>
                <td>Ounces Left</td>
                <td>{{weight_oz}}</td>
            </tr>
            <tr>
                <td>Total Beers</td>
                <td>{{total_beers}}</td>
            </tr>
            <tr>
                <td>Beers Consumed</td>
                <td>{{beers_consumed}}</td>
            </tr>
            <tr>
                <td>Beers Remaining</td>
                <td>{{beers_left}}</td>
            </tr>
        </table>
        </div>

        <hr>
        <p>To recalibrate your scale click <a href="calibrate">here</a></p>
{%  endif %}

{% endblock %}
